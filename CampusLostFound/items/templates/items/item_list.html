<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Campus Lost & Found</title>

<style>
/* ===============================
   CSS VARIABLES (Modern Palette)
   =============================== */
:root{
    --primary:#3b82f6;
    --primary-dark:#2563eb;
    --bg:#f8fafc;
    --card:#ffffff;
    --text:#1e293b;
    --muted:#64748b;
    --border:#e2e8f0;
    --radius:12px;
    --shadow:0 8px 24px rgba(0,0,0,0.06);
    --transition:all .25s ease;
}

/* ===============================
   GLOBAL
   =============================== */
*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family: Inter, "Segoe UI", sans-serif;
    background:var(--bg);
    color:var(--text);
    padding:24px;
}

/* ===============================
   TYPOGRAPHY
   =============================== */
h1{
    text-align:center;
    font-weight:700;
    margin-bottom:6px;
}

.subtitle{
    text-align:center;
    color:var(--muted);
    margin-bottom:22px;
}

/* ===============================
   BUTTONS
   =============================== */
.btn{
    padding:11px 18px;
    border-radius:var(--radius);
    border:none;
    cursor:pointer;
    font-size:14px;
    font-weight:600;
    transition:var(--transition);
    text-decoration:none;
    display:inline-block;
}

.btn-primary{
    background:var(--primary);
    color:white;
}
.btn-primary:hover{
    background:var(--primary-dark);
    transform:translateY(-2px);
}

.btn-light{
    background:#f1f5f9;
    color:#334155;
}
.btn-light:hover{
    background:#e2e8f0;
}

/* ===============================
   CONTAINERS
   =============================== */
.container{
    max-width:1100px;
    margin:auto;
}

.center{
    text-align:center;
    margin-bottom:22px;
}

/* ===============================
   ALERT MESSAGES
   =============================== */
.alert{
    background:#dcfce7;
    color:#166534;
    padding:12px;
    border-radius:var(--radius);
    margin-bottom:10px;
    box-shadow:var(--shadow);
}

/* ===============================
   SEARCH BAR
   =============================== */
.search-bar{
    display:flex;
    gap:10px;
    margin-bottom:18px;
    flex-wrap:wrap;
}

.input, select{
    padding:11px;
    border-radius:var(--radius);
    border:1px solid var(--border);
    font-size:14px;
    background:white;
    transition:var(--transition);
}

.input:focus, select:focus{
    outline:none;
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(59,130,246,.15);
}

.flex-1{flex:1}

/* ===============================
   TABS
   =============================== */
.tabs{
    display:flex;
    gap:10px;
    margin-bottom:20px;
}

.tab{
    flex:1;
    text-align:center;
    padding:11px;
    border-radius:var(--radius);
    text-decoration:none;
    font-weight:600;
    border:1px solid var(--border);
    color:var(--text);
    transition:var(--transition);
    background:white;
}

.tab.active{
    background:var(--primary);
    color:white;
    border-color:var(--primary);
}

.tab:hover{
    transform:translateY(-2px);
}

/* ===============================
   GRID CARDS
   =============================== */
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:18px;
}

.card{
    background:var(--card);
    padding:15px;
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    transition:var(--transition);
}

.card:hover{
    transform:translateY(-5px);
}

.card img{
    width:100%;
    height:140px;
    object-fit:cover;
    border-radius:10px;
    margin-bottom:10px;
}

.card h3{
    margin-bottom:6px;
}

.meta{
    font-size:13px;
    color:var(--muted);
    margin-top:6px;
}

.actions{
    margin-top:12px;
    display:flex;
    gap:8px;
}

.empty{
    text-align:center;
    grid-column:1/-1;
    padding:50px 0;
    color:var(--muted);
}

/* ===============================
   MOBILE
   =============================== */
@media(max-width:600px){
    body{padding:16px}
    .tabs{flex-direction:column}
}
</style>
</head>

<body>

<header class="container">
    <h1>Campus Lost & Found</h1>
    <p class="subtitle">Help reunite lost items with their owners</p>

    <div class="center">
        <a class="btn btn-primary" href="{% url 'items:report_item' 'lost' %}">➕ Report Lost Item</a>
        <a class="btn btn-primary" href="{% url 'items:report_item' 'found' %}">➕ Report Found Item</a>
    </div>
</header>

<!-- Messages -->
<div class="container">
{% if messages %}
    {% for message in messages %}
        <div class="alert">{{ message }}</div>
    {% endfor %}
{% endif %}
</div>

<!-- Search -->
<form method="get" class="container search-bar">
    <input class="input flex-1" type="text" name="q" placeholder="Search items..." value="{{ q }}">

    <select name="category">
        <option value="all" {% if category == 'all' %}selected{% endif %}>All Categories</option>
        {% for cat in categories %}
        <option value="{{ cat }}" {% if category == cat %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
    </select>

    <select name="location">
        <option value="all" {% if location == 'all' %}selected{% endif %}>All Locations</option>
        {% for loc in locations %}
        <option value="{{ loc }}" {% if location == loc %}selected{% endif %}>{{ loc }}</option>
        {% endfor %}
    </select>

    <input type="hidden" name="tab" value="{{ tab }}">
    <button class="btn btn-primary">Search</button>
</form>

<!-- Tabs -->
<div class="container tabs">
<a class="tab {% if tab == 'all' %}active{% endif %}"
   href="?tab=all&category={{ category }}&location={{ location }}&q={{ q }}">
   All ({{ total_count }})
</a>

<a class="tab {% if tab == 'lost' %}active{% endif %}"
   href="?tab=lost&category={{ category }}&location={{ location }}&q={{ q }}">
   Lost ({{ lost_count }})
</a>

<a class="tab {% if tab == 'found' %}active{% endif %}"
   href="?tab=found&category={{ category }}&location={{ location }}&q={{ q }}">
   Found ({{ found_count }})
</a>
</div>

<!-- Cards -->
<div class="container grid">
{% for item in items %}
<div class="card">

{% if item.image_url %}
<img src="{{ item.image_url }}" alt="{{ item.name }}">
{% endif %}

<h3>{{ item.name }}</h3>

<p class="meta">{{ item.description }}</p>

<p class="meta"><strong>Category:</strong> {{ item.category|default:'—' }}</p>
<p class="meta"><strong>Location:</strong> {{ item.location }}</p>
<p class="meta"><strong>Status:</strong> {{ item.get_status_display }}</p>
<p class="meta">Reported: {{ item.date_reported }}</p>

<div class="actions">
<a class="btn btn-primary" href="{% url 'items:item_detail' item.pk %}">View</a>
<a class="btn btn-light" href="{% url 'items:report_item' 'found' %}?q={{ item.name }}">Similar</a>
</div>

</div>
{% empty %}
<p class="empty">No items found matching your criteria.</p>
{% endfor %}
</div>

</body>
</html>
