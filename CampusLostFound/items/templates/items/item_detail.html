{% extends 'items/base.html' %}
{% load static %}

{% block title %}{{ item.name }} - Retrace{% endblock %}

{% block content %}
<div class="profile-container" style="max-width: 800px;">
    <!-- Brand / Back Navigation -->
    <div class="mb-6">
        <a href="{% url 'items:item_list' %}" class="btn btn-light" style="padding: 6px 14px; font-size: 13px;">
            <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i>
            Back to Browse
        </a>
    </div>

    <!-- Main Detail Card -->
    <div class="card-modern" style="padding: 0; overflow: hidden; margin-bottom: 24px;">
        <!-- Hero Image -->
        {% if item.image %}
        <div style="width: 100%; height: 400px; background: #f1f5f9; position: relative;">
            <img src="{{ item.image.url }}" alt="{{ item.name }}" style="width: 100%; height: 100%; object-fit: cover;">
            <div style="position: absolute; top: 16px; left: 16px;">
                <span class="badge {% if item.status == 'lost' %}badge-orange{% else %}badge-green{% endif %}"
                    style="padding: 6px 12px; font-size: 12px; box-shadow: var(--shadow-md);">
                    {{ item.get_status_display }}
                </span>
            </div>
        </div>
        {% else %}
        <div
            style="width: 100%; height: 200px; background: #f8fafc; display: flex; align-items: center; justify-content: center; color: var(--text-muted); border-bottom: 1px solid var(--border);">
            <div class="text-center">
                <i data-lucide="image" style="width: 48px; height: 48px; margin-bottom: 8px;"></i>
                <p style="font-size: 14px;">No image available</p>
            </div>
        </div>
        {% endif %}

        <div style="padding: 32px;">
            <div class="flex-between mb-4">
                <h1 style="font-size: 2.25rem; letter-spacing: -0.02em;">{{ item.name }}</h1>
                <div class="badge badge-blue" style="border-radius: 6px;">{{ item.category|default:"General" }}</div>
            </div>

            <p style="font-size: 1.125rem; color: var(--text-muted); margin-bottom: 32px; line-height: 1.7;">
                {{ item.description }}
            </p>

            <!-- Metadata Grid -->
            <div
                style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
                <div>
                    <div class="form-label" style="text-transform: uppercase;">Location</div>
                    <div style="display: flex; align-items: center; gap: 8px; font-weight: 600;">
                        <i data-lucide="map-pin" style="width: 18px; height: 18px; color: var(--primary);"></i>
                        {{ item.location }}
                    </div>
                </div>
                <div>
                    <div class="form-label" style="text-transform: uppercase;">Reported Date</div>
                    <div style="display: flex; align-items: center; gap: 8px; font-weight: 600;">
                        <i data-lucide="calendar" style="width: 18px; height: 18px; color: var(--primary);"></i>
                        {{ item.date_reported|date:"F d, Y" }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Section -->
    {% if item.contact_name or item.contact_email %}
    <div class="card-modern" style="border-left: 4px solid var(--primary);">
        <h3 class="mb-4" style="display: flex; align-items: center; gap: 8px;">
            <i data-lucide="user-check" style="width: 20px; height: 20px; color: var(--primary);"></i>
            Contact Information
        </h3>
        <div style="display: flex; gap: 32px;">
            {% if item.contact_name %}
            <div>
                <div class="form-label">Name</div>
                <div style="font-weight: 600;">{{ item.contact_name }}</div>
            </div>
            {% endif %}
            {% if item.contact_email %}
            <div>
                <div class="form-label">Email Address</div>
                <a href="mailto:{{ item.contact_email }}"
                    style="font-weight: 600; color: var(--primary); text-decoration: none; display: flex; align-items: center; gap: 6px;">
                    {{ item.contact_email }}
                    <i data-lucide="external-link" style="width: 14px; height: 14px;"></i>
                </a>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
